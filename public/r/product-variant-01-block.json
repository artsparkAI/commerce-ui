{
  "name": "product-variant-01-block",
  "type": "registry:block",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "badge",
    "https://ui.stackzero.co/r/image-viewer-basic.json",
    "https://ui.stackzero.co/r/price-format-basic.json",
    "https://ui.stackzero.co/r/variant-selector-basic.json",
    "https://ui.stackzero.co/r/quantity-input-basic.json"
  ],
  "files": [
    {
      "type": "registry:block",
      "content": "\"use client\";\n\nimport ImageViewer from \"@/components/commerce-ui/image-viewer-basic\";\nimport PriceFormat from \"@/components/commerce-ui/price-format-basic\";\nimport QuantityInputBasic from \"@/components/commerce-ui/quantity-input-basic\";\nimport VariantSelectorBasic, {\n  VariantItem as BaseVariantItem,\n} from \"@/components/commerce-ui/variant-selector-basic\";\nimport { Button } from \"@/components/ui/button\";\nimport { useState } from \"react\";\n\n// Extended VariantItem with price and image\ninterface VariantItem extends BaseVariantItem {\n  price?: number;\n  imageUrl?: string;\n}\n\n// Default data\nconst DEFAULT_IMAGE =\n  \"https://raw.githubusercontent.com/stackzero-labs/ui/refs/heads/main/public/placeholders/headphone-1.jpg\";\n\nconst DEFAULT_VARIANTS: VariantItem[] = [\n  {\n    id: \"variant-sport\",\n    label: \"Sport\",\n    value: \"variant-sport\",\n    price: 109.99,\n    imageUrl: DEFAULT_IMAGE,\n  },\n  {\n    id: \"variant-prosound\",\n    label: \"ProSound\",\n    value: \"variant-prosound\",\n    price: 99.99,\n    imageUrl: DEFAULT_IMAGE,\n  },\n  {\n    id: \"variant-ultraquite\",\n    label: \"UltraQuite™\",\n    value: \"variant-ultraquite\",\n    price: 89.99,\n    imageUrl: DEFAULT_IMAGE,\n  },\n  {\n    id: \"variant-extremesilence\",\n    label: \"ExtremeSilence™\",\n    value: \"variant-extremesilence\",\n    price: 119.99,\n    imageUrl: DEFAULT_IMAGE,\n  },\n];\n\n// Define the payload type for callbacks\ninterface VariantSelectionPayload {\n  variantId: string;\n  variantLabel: string;\n  quantity: number;\n  price: number;\n  totalPrice: number;\n}\n\ninterface ProductVariant01Props {\n  title?: string;\n  description?: string;\n  badge?: string | null;\n  basePrice?: number;\n  shippingInfo?: string;\n  variants: VariantItem[]; // Changed from optional to required\n  defaultImage?: string;\n  initialVariant?: string;\n  variantLabel?: string;\n\n  // Updated callback types with consolidated parameter\n  onAddToCart?: (payload: VariantSelectionPayload) => void;\n  onBuyNow?: (payload: VariantSelectionPayload) => void;\n\n  // Controlled mode props\n  selectedVariant?: string;\n  onVariantChange?: (variant: string) => void;\n  quantity?: number;\n  onQuantityChange?: (quantity: number) => void;\n\n  // Loading and error states\n  isLoading?: boolean;\n  errorMessage?: string | null;\n\n  // Availability\n  isInStock?: boolean;\n  availableQuantity?: number;\n}\n\nfunction ProductVariant_01({\n  badge = \"New Arrival\",\n  basePrice = 99.99,\n  description = \"Experience crystal-clear sound with our premium wireless headphones. Perfect for music lovers, gamers, and professionals.\",\n  variants = DEFAULT_VARIANTS,\n  defaultImage = DEFAULT_IMAGE,\n  onAddToCart = () => {},\n  onBuyNow = () => {},\n  shippingInfo = \"Free shipping on all orders\",\n  title = \"Premium Wireless Headphones\",\n  variantLabel = \"Model\",\n  // Initialize initialVariant to the first variant's value if not provided\n  initialVariant,\n  // Controlled mode props with default to uncontrolled\n  selectedVariant: controlledVariant,\n  onVariantChange,\n  quantity: controlledQuantity,\n  onQuantityChange,\n  // Loading and error states\n  isLoading = false,\n  errorMessage = null,\n  // Availability\n  isInStock = true,\n  availableQuantity = 10,\n}: ProductVariant01Props) {\n  // Ensure variants array is not empty\n  if (!variants.length) {\n    throw new Error(\"At least one variant must be provided\");\n  }\n\n  // Use the first variant's value as default if initialVariant is not provided\n  const defaultInitialVariant = initialVariant || variants[0].value;\n\n  // Internal state for uncontrolled mode\n  const [internalSelectedVariant, setInternalSelectedVariant] = useState(\n    defaultInitialVariant\n  );\n  const [internalQuantity, setInternalQuantity] = useState(1);\n\n  // Determine if we're in controlled or uncontrolled mode\n  const isVariantControlled = controlledVariant !== undefined;\n  const isQuantityControlled = controlledQuantity !== undefined;\n  const selectedVariantId = isVariantControlled\n    ? controlledVariant\n    : internalSelectedVariant;\n  const quantity = isQuantityControlled ? controlledQuantity : internalQuantity;\n\n  const handleVariantChange = (newVariant: string) => {\n    if (isVariantControlled) {\n      onVariantChange?.(newVariant);\n    } else {\n      setInternalSelectedVariant(newVariant);\n    }\n  };\n\n  const handleQuantityChange = (newQuantity: number) => {\n    if (isQuantityControlled) {\n      onQuantityChange?.(newQuantity);\n    } else {\n      setInternalQuantity(newQuantity);\n    }\n  };\n\n  // Find the selected variant\n  const selectedVariant =\n    variants.find((v) => v.value === selectedVariantId) || variants[0];\n\n  // Get image and price from the selected variant\n  const currentImage = selectedVariant?.imageUrl || defaultImage;\n  const currentPrice = selectedVariant?.price || basePrice;\n\n  const handleAddToCart = () => {\n    onAddToCart({\n      variantId: selectedVariantId,\n      variantLabel: selectedVariant?.label || \"\",\n      quantity: quantity,\n      price: currentPrice,\n      totalPrice: quantity * currentPrice,\n    });\n  };\n\n  const handleBuyNow = () => {\n    onBuyNow({\n      variantId: selectedVariantId,\n      variantLabel: selectedVariant?.label || \"\",\n      quantity: quantity,\n      price: currentPrice,\n      totalPrice: quantity * currentPrice,\n    });\n  };\n\n  if (errorMessage) {\n    return (\n      <div className=\"my-6 rounded-lg border border-red-200 bg-red-50 p-6 text-red-600 dark:border-red-900 dark:bg-red-900/20 dark:text-red-400\">\n        <p className=\"font-medium\">Error loading product</p>\n        <p className=\"text-sm\">{errorMessage}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"my-6 grid max-w-screen-lg grid-cols-1 gap-12 rounded-lg md:grid-cols-2\">\n      <div className=\"relative w-full overflow-hidden rounded-2xl bg-gradient-to-br from-teal-50 to-cyan-50 p-5 dark:from-teal-950/30 dark:to-cyan-950/30\">\n        {badge && (\n          <span className=\"absolute top-4 left-4 z-10 rounded-full bg-gradient-to-r from-teal-500 to-cyan-600 px-3 py-1.5 text-xs font-bold text-white\">\n            {badge}\n          </span>\n        )}\n        {/* Glow effect */}\n        <div className=\"absolute -bottom-10 left-1/2 h-40 w-40 -translate-x-1/2 transform rounded-full bg-teal-500/20 blur-3xl\"></div>\n        <div className=\"transition-transform duration-500 hover:scale-105\">\n          {isLoading ? (\n            <div className=\"flex h-[300px] items-center justify-center\">\n              <div className=\"h-10 w-10 animate-spin rounded-full border-4 border-teal-200 border-t-teal-600\"></div>\n            </div>\n          ) : (\n            <ImageViewer\n              imageUrl={currentImage}\n              classNameThumbnailViewer=\"rounded-lg object-contain h-[300px] mx-auto\"\n            />\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-6\">\n        {isLoading ? (\n          <div className=\"space-y-4\">\n            <div className=\"h-8 w-3/4 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700\"></div>\n            <div className=\"h-16 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700\"></div>\n            <div className=\"h-8 w-1/3 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700\"></div>\n          </div>\n        ) : (\n          <>\n            <div>\n              <h2 className=\"text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-100\">\n                {title}\n              </h2>\n              <p className=\"mt-3 text-gray-600 dark:text-gray-400\">\n                {description}\n              </p>\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <PriceFormat\n                prefix=\"$\"\n                value={currentPrice}\n                className=\"text-3xl font-bold text-teal-700 dark:text-teal-400\"\n              />\n              {shippingInfo && (\n                <p className=\"mt-1 inline-flex items-center text-sm text-green-600 dark:text-green-400\">\n                  <svg\n                    className=\"mr-1 h-4 w-4\"\n                    fill=\"currentColor\"\n                    viewBox=\"0 0 20 20\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                  {shippingInfo}\n                </p>\n              )}\n            </div>\n\n            {!isInStock && (\n              <div className=\"rounded-md bg-amber-50 p-3 text-amber-800 dark:bg-amber-900/20 dark:text-amber-300\">\n                <p className=\"text-sm font-medium\">Currently out of stock</p>\n              </div>\n            )}\n\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                  {variantLabel}\n                </label>\n                <VariantSelectorBasic\n                  value={selectedVariantId}\n                  onValueChange={handleVariantChange}\n                  variants={variants}\n                  className=\"grid-cols-2 sm:grid-cols-2\"\n                  itemClassName=\"bg-gray-50 border-gray-200 hover:border-teal-300 dark:bg-gray-800 dark:border-gray-700\n                                data-[state=checked]:border-teal-500 data-[state=checked]:bg-teal-50 \n                                data-[state=checked]:text-teal-700 dark:data-[state=checked]:bg-gray-700 \n                                dark:data-[state=checked]:border-teal-500 dark:data-[state=checked]:text-teal-300\n                                focus:ring-2 focus:ring-teal-500/50 focus:ring-offset-2 focus:border-teal-400\n                                dark:focus:ring-teal-500/40 dark:focus:ring-offset-gray-900\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                Quantity\n              </label>\n              <QuantityInputBasic\n                quantity={quantity}\n                onChange={handleQuantityChange}\n                max={isInStock ? availableQuantity || 10 : 0}\n                min={1}\n                className=\"max-w-[150px] border-gray-300 dark:border-gray-700\"\n                disabled={!isInStock}\n              />\n            </div>\n\n            <div className=\"mt-2 flex flex-col gap-3 sm:flex-row\">\n              <Button\n                variant=\"outline\"\n                className=\"w-full border-gray-300 bg-white text-gray-800 transition-all duration-200 hover:border-teal-500 hover:bg-teal-50 hover:text-teal-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-200 dark:hover:border-teal-500 dark:hover:bg-gray-700\"\n                onClick={handleAddToCart}\n                disabled={!isInStock || isLoading}\n              >\n                {isLoading ? \"Loading...\" : \"Add to Cart\"}\n              </Button>\n              <Button\n                className=\"w-full bg-gradient-to-r from-teal-600 to-cyan-600 text-white transition-all hover:from-teal-700 hover:to-cyan-700 disabled:from-gray-400 disabled:to-gray-500\"\n                onClick={handleBuyNow}\n                disabled={!isInStock || isLoading}\n              >\n                {isLoading ? \"Loading...\" : \"Buy Now\"}\n              </Button>\n            </div>\n\n            <div className=\"mt-4 rounded-lg border border-gray-200 p-4 dark:border-gray-800\">\n              <p className=\"font-medium text-gray-900 dark:text-gray-100\">\n                Selected Configuration:\n              </p>\n              <div className=\"mt-2 flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"h-3 w-3 rounded-full bg-teal-500\"></div>\n                  <p className=\"text-gray-700 dark:text-gray-300\">\n                    {selectedVariant?.label}\n                  </p>\n                </div>\n                <p className=\"font-medium text-teal-700 dark:text-teal-400\">\n                  ${currentPrice}\n                </p>\n              </div>\n              <p className=\"mt-2 text-xs text-gray-500\">\n                {quantity} {quantity > 1 ? \"units\" : \"unit\"} × ${currentPrice} =\n                ${(quantity * currentPrice).toFixed(2)}\n              </p>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default ProductVariant_01;\nexport type { ProductVariant01Props, VariantItem, VariantSelectionPayload };\n",
      "path": "/components/commerce-ui/blocks/product-variants/product-variants-01.tsx",
      "target": "/components/commerce-ui/product-variants-01.tsx"
    }
  ]
}